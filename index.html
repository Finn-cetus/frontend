<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CourseHub Infinity - N∆°i tri th·ª©c l√† v√¥ h·∫°n v√† mi·ªÖn ph√≠</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #1a1a2e;
            --bg-card: #16213e;
            --accent-neon: #00ffff;
            --accent-purple: #9d4edd;
            --accent-green: #39ff14;
            --text-primary: #ffffff;
            --text-secondary: #b8b8b8;
            --border-glow: rgba(0, 255, 255, 0.3);
            --color-admin: #ffd700; 
            --color-moderator: #1DA1F2;
        }

        /* S·ª≠a ƒë·ªïi con tr·ªè chu·ªôt */
        body {
            font-family: 'Fira Code', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            /* Con tr·ªè m·∫∑c ƒë·ªãnh l√† m·ªôt v√≤ng tr√≤n nh·ªè */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><circle cx="6" cy="6" r="4" fill="none" stroke="%2300ffff" stroke-width="1.5"/></svg>'), auto;
            overflow-x: hidden;
        }

        /* Con tr·ªè khi di chu·ªôt qua c√°c ph·∫ßn t·ª≠ c√≥ th·ªÉ nh·∫•p */
        .cursor-pointer, button, a, [onclick] {
             cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="%2300ffff" d="M14.5 9.5a1 1 0 0 1 0 1.41l-4.24 4.24a1 1 0 0 1-1.42 0l-4.24-4.24a1 1 0 1 1 1.41-1.41L10 12.09l3.09-3.09a1 1 0 0 1 1.41 0z"/></svg>'), pointer;
        }
        
        /* Lo·∫°i b·ªè c√°c style con tr·ªè c≈© */
        /* ... */

        header {
            background: rgba(26, 26, 46, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-glow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-neon);
            text-shadow: 0 0 10px var(--accent-neon);
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .btn-primary {
            background: linear-gradient(45deg, var(--accent-purple), var(--accent-neon));
            color: white;
            border: 1px solid transparent;
        }
        .btn-secondary {
            background: transparent;
            color: var(--accent-neon);
            border: 1px solid var(--accent-neon);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.3);
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .hero h1 {
            font-size: 3rem;
        }

        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .course-card {
            background: var(--bg-card);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 255, 0.1);
            transition: all 0.4s ease;
            position: relative;
        }
        .course-card:hover {
            transform: perspective(1000px) translateY(-10px);
            border-color: var(--accent-neon);
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.2);
        }

        .course-image {
            height: 180px;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-neon));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
        }
        
        .course-card-actions {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }
        .course-card:hover .course-card-actions {
            opacity: 1;
        }
        .action-btn {
            background: rgba(26, 26, 46, 0.7);
            border: 1px solid var(--accent-neon);
            color: var(--accent-neon);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }
        .action-btn:hover {
            background: var(--accent-neon);
            color: var(--bg-primary);
        }

        .course-content { padding: 1.5rem; }
        .course-title { font-size: 1.2rem; margin-bottom: 0.5rem; }
        .course-author {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .course-author strong {
            color: var(--accent-neon);
            font-weight: 500;
        }
        .verified-tick {
            font-size: 1rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
            padding: 2rem 0;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            border: 1px solid var(--accent-neon);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem; right: 1rem;
            background: none; border: none;
            color: var(--accent-neon);
            font-size: 1.5rem;
        }

        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; }
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg-primary);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
        }
        
        .auth-tabs { display: flex; margin-bottom: 2rem; }
        .auth-tab {
            flex: 1; padding: 1rem; background: transparent;
            border: none; color: var(--text-secondary);
            border-bottom: 2px solid transparent;
        }
        .auth-tab.active { color: var(--accent-neon); border-bottom-color: var(--accent-neon); }
        .auth-form { display: none; }
        .auth-form.active { display: block; }
        
        .admin-panel table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .admin-panel th, .admin-panel td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-glow);
        }
        .admin-panel select {
            background-color: var(--bg-secondary);
        }

        @media (max-width: 768px) {
            nav { flex-direction: column; gap: 1rem; }
            .hero h1 { font-size: 2rem; }
            .course-grid { grid-template-columns: 1fr; }
        }

    </style>
</head>
<body>
    <!-- HTML v√† Script kh√¥ng thay ƒë·ªïi nhi·ªÅu, ch·ªâ c·∫ßn copy l·∫°i -->
    <header>
        <nav>
            <div class="logo">CourseHub‚àû</div>
            <div class="nav-buttons">
                <button class="btn btn-secondary cursor-pointer" id="contributorsBtn">
                    <i class="fas fa-trophy"></i> B·∫£ng vinh danh
                </button>
                <button class="btn btn-secondary cursor-pointer" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i> ƒêƒÉng nh·∫≠p
                </button>
                <button class="btn btn-primary cursor-pointer" id="uploadBtn">
                    <i class="fas fa-plus"></i> ƒêƒÉng t·∫£i
                </button>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero" style="text-align: center; margin-bottom: 4rem;">
            <h1>CourseHub Infinity</h1>
            <p>üöÄ N∆°i tri th·ª©c l√† v√¥ h·∫°n v√† mi·ªÖn ph√≠ üöÄ</p>
        </section>

        <section>
            <h2 style="font-size: 2rem; margin-bottom: 2rem; color: var(--accent-neon);">
                <i class="fas fa-rocket"></i> Kh√°m ph√° c√°c kh√≥a h·ªçc
            </h2>
            <div class="course-grid" id="courseGrid"></div>
            <div id="paginationControls" style="text-align: center; margin: 2rem 0;"></div>
        </section>
    </main>

    <!-- C√°c Modal -->
    <div class="modal" id="authModal"><!-- N·ªôi dung modal x√°c th·ª±c --></div>
    <div class="modal" id="uploadModal"><!-- N·ªôi dung modal ƒëƒÉng t·∫£i --></div>
    <div class="modal" id="accountModal"><!-- N·ªôi dung modal t√†i kho·∫£n --></div>
    <div class="modal" id="contributorsModal"><!-- N·ªôi dung modal vinh danh --></div>
    <div class="modal" id="editCourseModal"><!-- N·ªôi dung modal s·ª≠a kh√≥a h·ªçc --></div>
    <div class="modal" id="confirmDeleteModal"><!-- N·ªôi dung modal x√°c nh·∫≠n x√≥a --></div>
    
    <script>
        const API_URL = 'https://backend-nyun.onrender.com';
let currentUser = null;
let currentPage = 1;
const limit = 6;

document.addEventListener('DOMContentLoaded', () => {
    // Initial setup
    loadCourses(currentPage);
    setupEventListeners();
    checkLoginStatus();
});

// --- API Abstraction ---
async function fetchData(endpoint, options = {}) {
    try {
        const token = localStorage.getItem('token');
        if (token) {
            options.headers = { ...options.headers, 'x-auth-token': token };
        }
        const response = await fetch(`${API_URL}${endpoint}`, options);
        const data = await response.json();
        if (!response.ok) throw new Error(data.msg || 'L·ªói kh√¥ng x√°c ƒë·ªãnh');
        return data;
    } catch (error) {
        showNotification(error.message, 'error');
        throw error;
    }
}

// --- Course Rendering ---
async function loadCourses(page) {
    currentPage = page;
    const courseGrid = document.getElementById('courseGrid');
    courseGrid.innerHTML = '<div>ƒêang t·∫£i...</div>';
    try {
        const data = await fetchData(`/api/courses?page=${page}&limit=${limit}`);
        courseGrid.innerHTML = '';
        if (data.courses && data.courses.length > 0) {
            data.courses.forEach(course => courseGrid.appendChild(createCourseCard(course)));
            renderPaginationControls(data.totalPages, data.currentPage);
        } else {
            courseGrid.innerHTML = '<p>Ch∆∞a c√≥ kh√≥a h·ªçc n√†o.</p>';
        }
    } catch (error) {
        courseGrid.innerHTML = `<p>Kh√¥ng th·ªÉ t·∫£i kh√≥a h·ªçc.</p>`;
    }
}

function createCourseCard(course) {
    const card = document.createElement('div');
    card.className = 'course-card';
    
    // --- Verification Ticks ---
    let tick = '';
    // L·ªói ti·ªÅm ·∫©n: course.author c√≥ th·ªÉ kh√¥ng t·ªìn t·∫°i n·∫øu populate kh√¥ng th√†nh c√¥ng
    if (course.author && course.author.role === 'admin') {
        tick = `<i class="fas fa-check-circle verified-tick" style="color: var(--color-admin);" title="Admin"></i>`;
    } else if (course.author && course.author.role === 'moderator') {
        tick = `<i class="fas fa-check-circle verified-tick" style="color: var(--color-moderator);" title="Ph√≥ qu·∫£n l√Ω"></i>`;
    }

    // --- Authorization for Actions ---
    let actions = '';
    const isOwner = currentUser && course.author && currentUser.id === course.author._id;
    const isAdmin = currentUser && currentUser.role === 'admin';
    const isModerator = currentUser && currentUser.role === 'moderator';
    const isAuthorAdmin = course.author && course.author.role === 'admin';

    if (isAdmin || (isModerator && !isAuthorAdmin) || isOwner) {
        actions = `
        <div class="course-card-actions">
            <button class="action-btn cursor-pointer" onclick='openEditModal(${JSON.stringify(course)})'><i class="fas fa-pen"></i></button>
            <button class="action-btn cursor-pointer" onclick="confirmDelete('${course._id}')"><i class="fas fa-trash"></i></button>
        </div>`;
    }

    card.innerHTML = `
        ${actions}
        <div class="course-image cursor-pointer" onclick="window.open('${course.link}', '_blank')"><i class="fas fa-play"></i></div>
        <div class="course-content">
            <h3 class="course-title">${course.title}</h3>
            <p class="course-author">by @${course.author ? course.author.username : '...'} ${tick}</p>
        </div>`;
    return card;
}

// --- UI Updates & Modals ---
function updateUIForLoggedIn(user) {
    currentUser = user;
    const loginBtn = document.getElementById('loginBtn');
    loginBtn.innerHTML = `<i class="fas fa-user"></i> ${user.username}`;
    loginBtn.className = 'btn btn-primary cursor-pointer';
    loginBtn.onclick = openAccountModal;
    if (!document.getElementById('logoutBtn')) {
        const logoutBtn = document.createElement('button');
        logoutBtn.id = 'logoutBtn';
        logoutBtn.className = 'btn btn-secondary cursor-pointer';
        logoutBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t';
        logoutBtn.onclick = handleLogout;
        loginBtn.parentElement.insertBefore(logoutBtn, loginBtn.nextSibling);
    }
}

function updateUIForLoggedOut() {
    currentUser = null;
    const loginBtn = document.getElementById('loginBtn');
    loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> ƒêƒÉng nh·∫≠p';
    loginBtn.className = 'btn btn-secondary cursor-pointer';
    loginBtn.onclick = () => openModal('authModal');
    document.getElementById('logoutBtn')?.remove();
}

async function openAccountModal() {
    openModal('accountModal');
    const detailsDiv = document.getElementById('accountDetails');
    detailsDiv.innerHTML = 'ƒêang t·∫£i th√¥ng tin...';
    try {
        const data = await fetchData('/api/users/me');
        let adminPanel = '';
        if (data.user.role === 'admin') {
            adminPanel = `
                <div class="admin-panel">
                    <h4 style="margin-top: 2rem; margin-bottom: 1rem;">B·∫£ng ƒëi·ªÅu khi·ªÉn Admin</h4>
                    <div id="userListContainer">ƒêang t·∫£i danh s√°ch th√†nh vi√™n...</div>
                </div>`;
        }
        detailsDiv.innerHTML = `
            <div>
                <p><strong>T√™n:</strong> ${data.user.username}</p>
                <p><strong>Email:</strong> ${data.user.email}</p>
                <p><strong>Vai tr√≤:</strong> ${data.user.role}</p>
                <p><strong>ƒê√≥ng g√≥p:</strong> ${data.user.contributionCount} kh√≥a h·ªçc</p>
            </div>
            ${adminPanel}`;
        
        if (data.user.role === 'admin') loadAllUsersForAdmin();

    } catch (error) {
        detailsDiv.innerHTML = 'Kh√¥ng th·ªÉ t·∫£i th√¥ng tin t√†i kho·∫£n.';
    }
}

async function loadAllUsersForAdmin() {
    const container = document.getElementById('userListContainer');
    try {
        const users = await fetchData('/api/admin/users');
        container.innerHTML = `
            <table>
                <thead>
                    <tr><th>Th√†nh vi√™n</th><th>Vai tr√≤</th><th>H√†nh ƒë·ªông</th></tr>
                </thead>
                <tbody>
                    ${users.map(user => `
                        <tr>
                            <td>${user.username}</td>
                            <td>${user.role}</td>
                            <td>
                                ${user.role !== 'admin' ? `
                                    <select onchange="handleUpdateUserRole('${user._id}', this.value)">
                                        <option value="user" ${user.role === 'user' ? 'selected' : ''}>Th√†nh vi√™n</option>
                                        <option value="moderator" ${user.role === 'moderator' ? 'selected' : ''}>Ph√≥ qu·∫£n l√Ω</option>
                                    </select>
                                ` : 'Kh√¥ng c√≥'}
                            </td>
                        </tr>`).join('')}
                </tbody>
            </table>`;
    } catch(e) {
        container.innerHTML = 'L·ªói khi t·∫£i danh s√°ch th√†nh vi√™n.';
    }
}

async function openContributorsModal() {
    openModal('contributorsModal');
    const detailsDiv = document.getElementById('contributorsDetails');
    detailsDiv.innerHTML = 'ƒêang t·∫£i danh s√°ch...';
    try {
        const users = await fetchData('/api/users/top-contributors');
        if(users && users.length > 0) {
             detailsDiv.innerHTML = `
                <div class="contributors-list">
                    <ol>
                        ${users.map(u => `<li><strong>${u.username}</strong> - ${u.contributionCount} ƒë√≥ng g√≥p</li>`).join('')}
                    </ol>
                </div>`;
        } else {
            detailsDiv.innerHTML = '<p>Ch∆∞a c√≥ ai ƒë√≥ng g√≥p. H√£y l√† ng∆∞·ªùi ƒë·∫ßu ti√™n!</p>';
        }
    } catch (error) {
        detailsDiv.innerHTML = 'Kh√¥ng th·ªÉ t·∫£i danh s√°ch ng∆∞·ªùi ƒë√≥ng g√≥p.';
    }
}

// --- Event Handlers & Actions ---
function handleLogout() {
    localStorage.removeItem('token');
    updateUIForLoggedOut();
    showNotification('B·∫°n ƒë√£ ƒëƒÉng xu·∫•t.', 'info');
}

async function handleRegister(e) {
    e.preventDefault();
    const form = e.target;
    const username = form.elements[0].value;
    const email = form.elements[1].value;
    const password = form.elements[2].value;
    if (password !== form.elements[3].value) return showNotification('M·∫≠t kh·∫©u kh√¥ng kh·ªõp!', 'error');
    
    try {
        const data = await fetchData('/api/auth/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username, email, password })
        });
        localStorage.setItem('token', data.token);
        checkLoginStatus();
        closeModal('authModal');
        showNotification('ƒêƒÉng k√Ω th√†nh c√¥ng!', 'success');
        form.reset();
    } catch (error) {}
}

async function handleLogin(e) {
    e.preventDefault();
    const form = e.target;
    const email = form.elements[0].value;
    const password = form.elements[1].value;
    try {
        const data = await fetchData('/api/auth/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, password })
        });
        localStorage.setItem('token', data.token);
        checkLoginStatus();
        closeModal('authModal');
        showNotification('Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i!', 'success');
        form.reset();
    } catch (error) {}
}

async function handleUpload(e) {
    e.preventDefault();
    const form = e.target;
    const courseData = {
        title: form.elements[0].value,
        link: form.elements[1].value,
        category: form.elements[2].value,
        description: form.elements[3].value
    };
    try {
        await fetchData('/api/courses', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(courseData)
        });
        closeModal('uploadModal');
        showNotification('ƒêƒÉng t·∫£i kh√≥a h·ªçc th√†nh c√¥ng!', 'success');
        form.reset();
        loadCourses(1);
    } catch(error) {}
}


async function handleUpdateUserRole(userId, newRole) {
    try {
        await fetchData(`/api/admin/users/${userId}/role`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ role: newRole })
        });
        showNotification('C·∫≠p nh·∫≠t vai tr√≤ th√†nh c√¥ng!', 'success');
        loadAllUsersForAdmin(); // Refresh list
    } catch (error) {}
}

function openEditModal(course) {
    document.getElementById('editCourseId').value = course._id;
    document.getElementById('editCourseTitle').value = course.title;
    document.getElementById('editCourseLink').value = course.link;
    document.getElementById('editCourseCategory').value = course.category;
    document.getElementById('editCourseDescription').value = course.description;
    openModal('editCourseModal');
}

async function handleEditCourse(e) {
    e.preventDefault();
    const courseId = document.getElementById('editCourseId').value;
    const courseData = {
        title: document.getElementById('editCourseTitle').value,
        link: document.getElementById('editCourseLink').value,
        category: document.getElementById('editCourseCategory').value,
        description: document.getElementById('editCourseDescription').value,
    };
    try {
        await fetchData(`/api/courses/${courseId}`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(courseData)
        });
        closeModal('editCourseModal');
        showNotification('C·∫≠p nh·∫≠t kh√≥a h·ªçc th√†nh c√¥ng!', 'success');
        loadCourses(currentPage);
    } catch (error) {}
}

function confirmDelete(courseId) {
    openModal('confirmDeleteModal');
    document.getElementById('confirmDeleteBtn').onclick = () => handleDeleteCourse(courseId);
}

async function handleDeleteCourse(courseId) {
    try {
        await fetchData(`/api/courses/${courseId}`, { method: 'DELETE' });
        closeModal('confirmDeleteModal');
        showNotification('ƒê√£ x√≥a kh√≥a h·ªçc.', 'success');
        loadCourses(currentPage);
    } catch (error) {}
}

// --- Utility Functions ---
function setupEventListeners() {
    // Main navigation buttons
    document.getElementById('loginBtn').addEventListener('click', () => openModal('authModal'));
    document.getElementById('contributorsBtn').addEventListener('click', openContributorsModal);
    document.getElementById('uploadBtn').addEventListener('click', () => {
        if (!currentUser) {
            showNotification('B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒëƒÉng t·∫£i.', 'warning');
            openModal('authModal');
        } else {
            openModal('uploadModal');
        }
    });

    // All modal close buttons
    document.querySelectorAll('.modal-close').forEach(btn => {
        btn.addEventListener('click', () => closeModal(btn.closest('.modal').id));
    });

    // Auth tabs (Login/Register)
    document.querySelectorAll('.auth-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            document.querySelector('.auth-tab.active').classList.remove('active');
            this.classList.add('active');
            document.querySelector('.auth-form.active').classList.remove('active');
            document.getElementById(this.dataset.tab + 'Form').classList.add('active');
        });
    });

    // Form submissions
    document.getElementById('loginForm').addEventListener('submit', handleLogin);
    document.getElementById('registerForm').addEventListener('submit', handleRegister);
    document.getElementById('uploadForm').addEventListener('submit', handleUpload);
    document.getElementById('editCourseForm').addEventListener('submit', handleEditCourse);
}

function checkLoginStatus() {
    const token = localStorage.getItem('token');
    if (token) {
        try {
            const user = JSON.parse(atob(token.split('.')[1])).user;
            updateUIForLoggedIn(user);
        } catch (e) { handleLogout(); }
    } else { updateUIForLoggedOut(); }
}

function openModal(modalId) { 
    const modal = document.getElementById(modalId);
    if(modal) modal.style.display = 'flex'; 
}

function closeModal(modalId) { 
    const modal = document.getElementById(modalId);
    if(modal) modal.style.display = 'none'; 
}

function showNotification(message, type = 'info') {
    const el = document.createElement('div');
    el.textContent = message;
    Object.assign(el.style, {
        position: 'fixed', bottom: '20px', right: '20px', padding: '1rem 2rem',
        borderRadius: '8px', color: '#fff', zIndex: '3000', opacity: '0',
        transition: 'opacity 0.5s ease',
        background: type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'
    });
    document.body.appendChild(el);
    setTimeout(() => { el.style.opacity = '1'; }, 10);
    setTimeout(() => {
        el.style.opacity = '0';
        setTimeout(() => el.remove(), 500);
    }, 3000);
}

function renderPaginationControls(totalPages, currentPage) {
    const controls = document.getElementById('paginationControls');
    controls.innerHTML = '';
    if (totalPages <= 1) return;
    
    if (currentPage > 1) {
        const prevBtn = document.createElement('button');
        prevBtn.className = 'btn btn-secondary';
        prevBtn.innerHTML = '&laquo; Tr∆∞·ªõc';
        prevBtn.onclick = () => loadCourses(currentPage - 1);
        controls.appendChild(prevBtn);
    }

    const pageInfo = document.createElement('span');
    pageInfo.style.margin = '0 1rem';
    pageInfo.textContent = `Trang ${currentPage} / ${totalPages}`;
    controls.appendChild(pageInfo);

    if (currentPage < totalPages) {
        const nextBtn = document.createElement('button');
        nextBtn.className = 'btn btn-secondary';
        nextBtn.innerHTML = 'Sau &raquo;';
        nextBtn.onclick = () => loadCourses(currentPage + 1);
        controls.appendChild(nextBtn);
    }
}
    </script> <!-- Gi·∫£ s·ª≠ script ƒë∆∞·ª£c t√°ch ra -->
</body>
</html>

